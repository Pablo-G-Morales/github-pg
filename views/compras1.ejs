<%- include('partials/header') %>

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet"/>

<style>
  :root{
    --srex-primary:#2b2e62;
    --srex-accent:#00bb00;
  }
  .card-cubo{
    background:var(--srex-primary);
    color:#fff;
    width:230px;
    border-radius:1rem;
    box-shadow:0 4px 10px rgba(0,0,0,.25);
    transition:transform .15s ease-in-out;
  }
  .card-cubo:hover{transform:scale(1.04);}
  .card-cubo .btn{background:var(--srex-accent); border:none;}
  .card-cubo .btn:hover{filter:brightness(.95);}
</style>

<div class="container-fluid py-4">

  <!-- ENCABEZADO -->
  <header class="mb-4 d-flex align-items-center justify-content-between">
    <div>
      <h1 class="h2 fw-bold mb-1">Compras</h1>
      <p class="text-muted mb-0">
        Accesos rápidos para registrar compras, autorizar, devoluciones y administrar catálogos relacionados.
      </p>
    </div>
    <a href="/" class="btn btn-outline-light">
      <i class="fa fa-tachometer-alt"></i> Dashboard
    </a>
  </header>

  <!-- TARJETAS DEL MENÚ -->
  <div class="row g-4 justify-content-center">

    <!-- Nueva compra (Tienda V4) -->
    <div class="col-6 col-md-3 d-flex justify-content-center">
      <div class="card card-cubo p-3 text-center d-flex flex-column align-items-center">
        <i class="fa-solid fa-store fa-2x mb-2"></i>
        <small class="fw-semibold flex-grow-1">
          Nueva compra
        </small>
        <a href="/compras-v4" class="btn btn-sm mt-2 px-3">Entrar</a>
      </div>
    </div>

    <!-- Autorizar / Registrar factura (solo ADMIN) -->
    <% if (user && user.rol_id === 1) { %>
    <div class="col-6 col-md-3 d-flex justify-content-center">
      <div class="card card-cubo p-3 text-center d-flex flex-column align-items-center">
        <i class="fa-solid fa-clipboard-check fa-2x mb-2"></i>
        <small class="fw-semibold flex-grow-1">
          Autorizar / Registrar factura
        </small>
        <a href="/compras-v4/autorizar" class="btn btn-sm mt-2 px-3">Revisar</a>
      </div>
    </div>
    <% } %>

    <!-- Facturas de compras (listado) -->
    <div class="col-6 col-md-3 d-flex justify-content-center">
      <div class="card card-cubo p-3 text-center d-flex flex-column align-items-center">
        <i class="fa-solid fa-file-invoice fa-2x mb-2"></i>
        <small class="fw-semibold flex-grow-1">
          Facturas registradas
        </small>
        <a href="/compras-v4/facturas" class="btn btn-sm mt-2 px-3">Ver</a>
      </div>
    </div>

    <!-- Devoluciones: elegir compra COMPLETADA (solo ADMIN) -->
    <% if (user && user.rol_id === 1) { %>
    <div class="col-6 col-md-3 d-flex justify-content-center">
      <div class="card card-cubo p-3 text-center d-flex flex-column align-items-center">
        <i class="fa-solid fa-rotate-left fa-2x mb-2"></i>
        <small class="fw-semibold flex-grow-1">
          Registrar devolución
        </small>
        <a href="/compras-v4/devoluciones/nueva" class="btn btn-sm mt-2 px-3">Elegir compra</a>
      </div>
    </div>
    <% } %>

    <!-- Devoluciones (listado) (solo ADMIN) -->
    <% if (user && user.rol_id === 1) { %>
    <div class="col-6 col-md-3 d-flex justify-content-center">
      <div class="card card-cubo p-3 text-center d-flex flex-column align-items-center">
        <i class="fa-solid fa-arrow-rotate-left fa-2x mb-2"></i>
        <small class="fw-semibold flex-grow-1">
          Devoluciones de compras
        </small>
        <a href="/compras-v4/devoluciones" class="btn btn-sm mt-2 px-3">Ver</a>
      </div>
    </div>
    <% } %>

    <!-- Cotización / flujo v2 (alias) -->
    <div class="col-6 col-md-3 d-flex justify-content-center">
      <div class="card card-cubo p-3 text-center d-flex flex-column align-items-center">
        <i class="fa-solid fa-cart-plus fa-2x mb-2"></i>
        <small class="fw-semibold flex-grow-1">
          Cotización de compra
        </small>
        <a href="/compras-v2" class="btn btn-sm mt-2 px-3">Entrar</a>
      </div>
    </div>

    <!-- Forma de pago -->
    <div class="col-6 col-md-3 d-flex justify-content-center">
      <div class="card card-cubo p-3 text-center d-flex flex-column align-items-center">
        <i class="fa-regular fa-credit-card fa-2x mb-2"></i>
        <small class="fw-semibold flex-grow-1">
          Forma de pago
        </small>
        <a href="/catalogos/formas-pago" class="btn btn-sm mt-2 px-3">Administrar</a>
      </div>
    </div>

    <!-- Condición de pago -->
    <div class="col-6 col-md-3 d-flex justify-content-center">
      <div class="card card-cubo p-3 text-center d-flex flex-column align-items-center">
        <i class="fa-solid fa-file-invoice-dollar fa-2x mb-2"></i>
        <small class="fw-semibold flex-grow-1">
          Condición de pago
        </small>
        <a href="/catalogos/condiciones-pago" class="btn btn-sm mt-2 px-3">Administrar</a>
      </div>
    </div>

    <!-- Tipo de documento -->
    <div class="col-6 col-md-3 d-flex justify-content-center">
      <div class="card card-cubo p-3 text-center d-flex flex-column align-items-center">
        <i class="fa-solid fa-file-circle-plus fa-2x mb-2"></i>
        <small class="fw-semibold flex-grow-1">
          Tipo de documento
        </small>
        <a href="/catalogos/tipos-documento" class="btn btn-sm mt-2 px-3">Administrar</a>
      </div>
    </div>

  </div>
</div>

<%- include('partials/footer') %>
